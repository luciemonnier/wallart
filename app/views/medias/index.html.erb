<div class="container">
  <div class="media-cards">
    <% if params[:query].present? %>
    <h4>Nos r√©sultats pour <strong><%= params[:query] %></strong></h4>
    <div class="row">
      <% @medias.each do |media| %>
          <div class="col-xs-12 col-sm-6 col-md-4">
            <div class="media-card" style="background-image: url('<%= image_path media.photos.first.url, crop: :fill;%>'); background-size: cover;">
            </div>
          </div>
      <% end %>
    </div>
    <% else %>
      <% @categories.each do |category| %>
        <div class="category-title">
          <h3><%= link_to category.name.capitalize + 's', category_path(category), class: 'categ-link' %></h3>
          <div class="red-square"></div>
        </div>
          <div class="category-row">
              <% @medias.select{ |media| media.category == category}.each do |media| %>
                <%= link_to media_path(media) do %>
                <% media.photos.each do |photo| %>
                    <div class="media-card" style="background-image: url('<%= image_path photo.url, crop: :fill;%>'); background-size: cover;">
                    </div>
                <% end %>
              <% end %>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
